{"version":3,"sources":["common/Image/Image.module.scss","common/Avatar/Avatar.module.scss","pages/Topic/Topic.module.scss","components/RouterNavigator/matchPath.js","components/RouterNavigator/RouterNavigator.js","components/RouterNavigator/index.js","utils/createPage.js","schemas.js","models/TopicFeeds.js","utils/htmlToText.js","common/Image/index.js","common/Image/Image.js","common/Avatar/index.js","common/Avatar/Avatar.js","components/TopicItem/index.js","components/TopicItem/TopicItem.js","pages/Home/Menu.js","pages/Home/Home.js","pages/Home/index.js","utils/timeago.js","models/TopicDetail.js","pages/Topic/Topic.js","App.js","serviceWorker.js","index.js","components/TopicItem/TopicItem.module.scss","../../cnodejs.api/lib/index.js"],"names":["module","exports","image","avatar","topic","author","anthorContent","publish","replyAuthor","replyAvatar","replyAuthorContent","replyTime","cache","cacheLimit","cacheCount","matchPath","pathname","options","arguments","length","undefined","path","_options","_options$exact","exact","_options$strict","strict","_options$sensitive","sensitive","concat","reduce","matched","_compilePath","cacheKey","end","pathCache","keys","result","regexp","pathToRegexp","compilePath","match","exec","_match","Object","toArray","url","values","slice","isExact","params","memo","key","index","name","history","createHashHistory","getRouteIndex","location","query","parse","search","Number","_","getCurrRouteIndex","getNextRouteIndex","getInitialRouteStack","rootRoute","RouterNavigator","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","popPage","goBack","pushPage","nextURL","nextIndex","indexOf","navigator","current","push","resetPage","replaceURl","replaceIndex","replace","handleHistoryChange","action","lastIndex","lastLocation","popIndex","route","pages","renderPage","_ref","routes","onlyPath","Component","some","routeMathch","component","react_default","a","createElement","assertThisInitialized","createRef","initialRouteStack","root","window","unlisten","listen","_this$props","initialRoute","objectWithoutProperties","react_onsenui","assign","ref","PureComponent","defaultProps","createPage","models","getInitialProps","mapStateToProps","mapDispatchToProps","Page","ConnectedPage","connect","WrappedPage","_PureComponent","state","mounted","inherits","createClass","value","store","context","rcc","model","Date","now","setState","_this2","unmodel","map","displayName","contextTypes","PropTypes","object","Schema","reply","entity","replies","TopicFeeds","namespace","api","page","tab","then","data","item","author_id","topicItem","objectSpread","id","meta","hasMore","entities","schema","getTopics","getData","getEntity","getState","ListPage","caches","Image","children","className","source","style","classNames","classes","backgroundImage","Avatar","common_Image","TopicItem","schemas","dispatch","card--material","ons","platform","isAndroid","header","common_Avatar","avatar_url","headerContent","loginname","dayjs","create_at","format","content","card--material__content","title","html","container","document","innerHTML","innerText","htmlToText","footer","visit_count","reply_count","menus","icon","Menu","onClick","dataSource","renderRow","menu","Home","onPullHookChange","pullHookState","onRefresh","done","refreshDone","onLoadMore","Promise","resolve","loadMoreDone","isRowLoaded","_ref2","topics","openSidebar","sidebarOpen","closeSidebar","renderTopic","_ref3","parent","dist_es","columnIndex","rowIndex","components_TopicItem","renderSidebar","renderMain","_this$state","renderToolbar","onChange","onLoad","size","spin","scrollElement","pageContentEle","_ref4","height","width","isScrolling","registerChild","scrollTop","rowCount","loadMoreRows","threshold","autoHeight","deferredMeasurementCache","onRowsRendered","_ref5","startIndex","stopIndex","overscanRowCount","rowHeight","rowRenderer","CellMeasurerCache","fixedWidth","fixedHeight","pageEle","findDOMNode","querySelector","prevProps","prevState","refreshing","moreLoading","collapse","isOpen","side","swipeable","onClose","topicFeeds","_ref6","actions","initiateIfNeed","_ref7","initiate","getInitiate","loadMore","getLoadMore","moreLoadError","error","loading","refreshError","_ref8","timeago","date","TopicDetail","getTopic","entitiesState","articleEntity","getDetail","replyId","DetailPage","Topic","authorName","dangerouslySetInnerHTML","__html","replyAuthorName","renderReplies","ROUTES","topicDetail","App","components_RouterNavigator","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","init","ReactDOM","render","es","src_App","getElementById","URL","process","href","origin","addEventListener","fetch","response","contentType","headers","get","status","ready","unregister","reload","checkValidServiceWorker","defineProperty","setAccessToken","accessToken","localStorage","setItem","PREFIX","getAccessToken","getItem","request","method","originalReturn","accesstoken","test","Error","json","success","error_msg","loadTopicList","loadTopicDetail","collectTopic","isCollect","Content-Type","body","likeReply","loadUserDetail","loadUserCollections","loadMessages","markMessage","markAllMessage","login","obj","target","i","prototype","hasOwnProperty","_objectWithoutProperties","logout"],"mappings":"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","file":"static/js/main.48a87e7c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"Image_image__21ZFJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"Avatar_avatar__2XqKj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"topic\":\"Topic_topic__2D3q7\",\"author\":\"Topic_author__cY4oc\",\"avatar\":\"Topic_avatar__2XVFS\",\"anthorContent\":\"Topic_anthorContent__Hk_u1\",\"publish\":\"Topic_publish__3S5je\",\"replyAuthor\":\"Topic_replyAuthor__2v56h\",\"replyAvatar\":\"Topic_replyAvatar__3A3ka\",\"replyAuthorContent\":\"Topic_replyAuthorContent__2QgJE\",\"replyTime\":\"Topic_replyTime__aJmmK\"};","import pathToRegexp from 'path-to-regexp';\n\nconst cache = {};\nconst cacheLimit = 10000;\nlet cacheCount = 0;\n\nfunction compilePath(path, options) {\n  const cacheKey = `${options.end}${options.strict}${options.sensitive}`;\n  const pathCache = cache[cacheKey] || (cache[cacheKey] = {});\n\n  if (pathCache[path]) return pathCache[path];\n\n  const keys = [];\n  const regexp = pathToRegexp(path, keys, options);\n  const result = { regexp, keys };\n\n  if (cacheCount < cacheLimit) {\n    pathCache[path] = result;\n    cacheCount += 1;\n  }\n\n  return result;\n}\n\n/**\n * Public API for matching a URL pathname to a path.\n */\nfunction matchPath(pathname, options = {}) {\n  if (typeof options === 'string') options = { path: options };\n\n  const { exact = true, strict = false, sensitive = false } = options;\n\n  const paths = [].concat(options.path);\n\n  return paths.reduce((matched, path) => {\n    if (matched) return matched;\n    const { regexp, keys } = compilePath(path, {\n      end: exact,\n      strict,\n      sensitive,\n    });\n    const match = regexp.exec(pathname);\n\n    if (!match) return null;\n\n    const [url, ...values] = match;\n    const isExact = pathname === url;\n\n    if (exact && !isExact) return null;\n\n    return {\n      path, // the path used to match\n      url: path === '/' && url === '' ? '/' : url, // the matched portion of the URL\n      isExact, // whether or not we matched exactly\n      params: keys.reduce((memo, key, index) => {\n        memo[key.name] = values[index];\n        return memo;\n      }, {}),\n    };\n  }, null);\n}\n\nexport default matchPath;\n","import url from 'url';\nimport PropTypes from 'prop-types';\nimport React, { createRef, PureComponent } from 'react';\nimport { Navigator } from 'react-onsenui';\nimport { createHashHistory } from 'history';\nimport matchPath from './matchPath';\n\nconst history = createHashHistory();\nconst getRouteIndex = location => {\n  const { query } = url.parse(location.search, true);\n  return Number((query && query._) || '0');\n};\nconst getCurrRouteIndex = () => getRouteIndex(history.location);\nconst getNextRouteIndex = () => getCurrRouteIndex() + 1;\nconst getInitialRouteStack = rootRoute => {\n  if (history.location.pathname !== rootRoute) {\n    return [\n      { path: '/' }, // 后退时可能和浏览器地址不匹配\n      { path: `${history.location.pathname}${history.location.search}` },\n    ];\n  }\n  return [{ path: `${history.location.pathname}${history.location.search}` }];\n};\n\nclass RouterNavigator extends PureComponent {\n  static propTypes = {\n    root: PropTypes.string, // 根路由地址\n    routes: PropTypes.arrayOf(\n      PropTypes.shape({\n        component: PropTypes.func.isRequired,\n        path: PropTypes.string.isRequired,\n        exact: PropTypes.bool,\n        strict: PropTypes.bool,\n      })\n    ).isRequired,\n  };\n\n  static defaultProps = {\n    root: '/',\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.navigator = createRef();\n    this.lastLocation = history.location;\n    this.initialRouteStack = getInitialRouteStack(props.root);\n  }\n\n  componentDidMount() {\n    window.a = this.navigator.current;\n    this.unlisten = history.listen(this.handleHistoryChange);\n  }\n\n  componentWillUnmount() {\n    if (typeof this.unlisten === 'function') {\n      this.unlisten();\n    }\n  }\n\n  popPage = options => {\n    history.goBack();\n  };\n\n  pushPage = (path, options) => {\n    const nextIndex = getNextRouteIndex();\n    let nextURL;\n    if (path.indexOf('?') >= 0) {\n      nextURL = `${path}&_=${nextIndex}`;\n    } else {\n      nextURL = `${path}?_=${nextIndex}`;\n    }\n    this.navigator.current.pushPage({ path: nextURL }, options);\n    history.push(nextURL);\n  };\n\n  resetPage = (path, options) => {\n    const replaceIndex = getCurrRouteIndex();\n    let replaceURl;\n    if (path.indexOf('?') >= 0) {\n      replaceURl = `${path}&_=${replaceIndex}`;\n    } else {\n      replaceURl = `${path}?_=${replaceIndex}`;\n    }\n    this.navigator.current.resetPage({ path: replaceURl }, options);\n    history.replace(replaceURl);\n  };\n\n  handleHistoryChange = (location, action) => {\n    if (action === 'POP') {\n      const lastIndex = getRouteIndex(this.lastLocation);\n      const popIndex = getRouteIndex(location);\n      const route = { path: `${location.pathname}${location.search}` };\n      if (popIndex > lastIndex) {\n        this.navigator.current.pushPage(route);\n      } else if (\n        popIndex < lastIndex &&\n        this.navigator.current.pages.length > 1\n      ) {\n        this.navigator.current.popPage();\n      }\n    }\n    this.lastLocation = location;\n  };\n\n  renderPage = ({ path }, navigator) => {\n    const { routes } = this.props;\n    const onlyPath = path.replace(/\\?.*$/gi, '');\n    let match = null;\n    let Component = null;\n    routes.some(route => {\n      const routeMathch = matchPath(onlyPath, route);\n      if (routeMathch) {\n        match = routeMathch;\n        Component = route.component;\n        return true;\n      }\n      return false;\n    });\n    if (Component) {\n      const { query } = url.parse(path, true);\n      match.query = query;\n      return (\n        <Component\n          key={path}\n          index={match._ || 0}\n          history={history}\n          location={history.location}\n          match={match}\n          navigator={this}\n        />\n      );\n    }\n    return null; // TODO 404\n  };\n\n  render() {\n    const { routes, initialRoute, ...props } = this.props;\n    return (\n      <Navigator\n        {...props}\n        ref={this.navigator}\n        initialRouteStack={this.initialRouteStack}\n        renderPage={this.renderPage}\n      />\n    );\n  }\n}\n\nexport default RouterNavigator;\n","import RouterNavigator from './RouterNavigator';\n\nexport default RouterNavigator;\n","import PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport React, { PureComponent } from 'react';\n\nexport default ({\n  models,\n  getInitialProps,\n  mapStateToProps,\n  mapDispatchToProps,\n}) => Page => {\n  const ConnectedPage = connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Page);\n  class WrappedPage extends PureComponent {\n    static displayName = `createPage(${Page.displayName ||\n      Page.name ||\n      'Page'})`;\n\n    static contextTypes = {\n      store: PropTypes.object,\n    };\n\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        mounted: false,\n      };\n      this.models = null;\n    }\n\n    componentDidMount() {\n      const { store } = this.context;\n      if (store) {\n        this.models = Object.keys(models).reduce((rcc, key) => {\n          const model = new models[key](Date.now());\n          store.model(model);\n          rcc[key] = model;\n          return rcc;\n        }, {});\n        getInitialProps({ props: this.props, store, models: this.models });\n      }\n      this.setState({ mounted: true });\n    }\n\n    componentWillUnmount() {\n      const { store } = this.context;\n      if (store && this.models) {\n        store.unmodel(Object.keys(this.models).map(key => this.models[key]));\n      }\n    }\n\n    render() {\n      const { mounted } = this.state;\n      if (!mounted) {\n        return null;\n      }\n      return <ConnectedPage {...this.props} models={this.models} />;\n    }\n  }\n  return WrappedPage;\n};\n","import { Schema } from 'redumd';\n\nexport const author = new Schema('authors');\nexport const reply = new Schema('replies');\nexport const topic = new Schema('topics', {\n  author: author.entity,\n  replies: [reply.entity],\n});\n","import { entities, ListPage } from 'redumd';\nimport * as api from 'cnodejs.api';\nimport { topic } from '../schemas';\n\nclass TopicFeeds extends ListPage {\n  constructor(namespace = '') {\n    super(`TopicFeeds/${namespace}`, {\n      api: (page, tab = '') => {\n        return api.loadTopicList(tab, page, 15).then(data => {\n          return {\n            data: data.map(item => {\n              const { author, author_id, ...topicItem } = item;\n              topicItem.author = {\n                ...author,\n                id: author_id,\n              };\n              return topicItem;\n            }),\n            meta: {\n              page,\n              hasMore: data.length > 0,\n            },\n          };\n        });\n      },\n      entities,\n      schema: topic,\n    });\n\n    this.getTopics = state =>\n      this.getData(state).map(id =>\n        topic.getEntity(entities.getState(state), id)\n      );\n  }\n}\n\nexport default TopicFeeds;\n","const caches = {};\n\nexport default html => {\n  if (caches[html]) return caches[html];\n  const container = document.createElement('div');\n  container.innerHTML = html;\n  caches[html] = container.innerText;\n  return caches[html];\n};\n","import Image from './Image';\n\nexport default Image;\n","import classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport classes from './Image.module.scss';\n\nclass Image extends PureComponent {\n  static propTypes = {\n    source: PropTypes.string.isRequired,\n  };\n\n  render() {\n    const { children, className, source, style, ...props } = this.props;\n    return (\n      <div\n        {...props}\n        className={classNames(classes.image, className)}\n        style={{\n          ...style,\n          backgroundImage: `url(${source})`,\n        }}\n      >\n        {children}\n      </div>\n    );\n  }\n}\n\nexport default Image;\n","import Avatar from './Avatar';\n\nexport default Avatar;\n","import classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport Image from '../Image';\nimport classes from './Avatar.module.scss';\n\nclass Avatar extends PureComponent {\n  static propTypes = {\n    source: PropTypes.string.isRequired,\n  };\n\n  render() {\n    const { className, ...props } = this.props;\n    return (\n      <Image {...props} className={classNames(classes.avatar, className)} />\n    );\n  }\n}\n\nexport default Avatar;\n","import TopicItem from './TopicItem';\n\nexport default TopicItem;\n","import ons from 'onsenui';\nimport dayjs from 'dayjs';\nimport classNames from 'classnames';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { entities } from 'redumd';\nimport * as schemas from '../../schemas';\nimport htmlToText from '../../utils/htmlToText';\nimport Avatar from '../../common/Avatar';\nimport classes from './TopicItem.module.scss';\n\nconst TopicItem = ({ dispatch, author, topic, ...props }) => (\n  <div\n    {...props}\n    className={classNames('card', {\n      'card--material': ons.platform.isAndroid(),\n    })}\n  >\n    <div className={classes.header}>\n      <Avatar\n        className={classes.avatar}\n        source={author ? author.avatar_url : ''}\n      />\n      <div className={classes.headerContent}>\n        <div className={classes.author}>{author ? author.loginname : ''}</div>\n        <div className={classes.publish}>\n          {dayjs(topic.create_at).format('YYYY-MM-DD HH:mm:ss')}\n        </div>\n      </div>\n    </div>\n    <div\n      className={classNames(classes.content, 'card__content', {\n        'card--material__content': ons.platform.isAndroid(),\n      })}\n    >\n      <div className={classes.title}>{topic.title}</div>\n      {htmlToText(topic.content)}\n    </div>\n    <div className={classes.footer}>\n      <span>{`${topic.visit_count} 访问 `}</span>\n      <span>•</span>\n      <span>{` ${topic.reply_count} 回复`}</span>\n    </div>\n  </div>\n);\n\nconst mapStateToProps = (state, props) => {\n  const { topic } = props;\n  if (topic && topic.author) {\n    return {\n      author: schemas.author.getEntity(entities.getState(state), topic.author),\n    };\n  }\n  return {};\n};\n\nexport default connect(mapStateToProps)(TopicItem);\n","import React from 'react';\nimport { List, ListItem } from 'react-onsenui';\n\nconst menus = [\n  {\n    tab: '',\n    icon: '',\n    title: '全部',\n  },\n  {\n    tab: 'good',\n    icon: '',\n    title: '精华',\n  },\n  {\n    tab: 'share',\n    icon: '',\n    title: '分享',\n  },\n  {\n    tab: 'ask',\n    icon: '',\n    title: '问答',\n  },\n  {\n    tab: 'job',\n    icon: '',\n    title: '招聘',\n  },\n];\n\nexport default ({ onClick }) => (\n  <List\n    dataSource={menus}\n    renderRow={(menu, index) => {\n      return (\n        <ListItem\n          key={index}\n          onClick={() => {\n            onClick(menu.tab);\n          }}\n        >\n          {menu.title}\n        </ListItem>\n      );\n    }}\n  />\n);\n","import React, { createRef, PureComponent } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport {\n  Icon,\n  Page,\n  PullHook,\n  Splitter,\n  SplitterSide,\n  SplitterContent,\n  Toolbar,\n  ToolbarButton,\n} from 'react-onsenui';\nimport {\n  CellMeasurer,\n  CellMeasurerCache,\n  InfiniteLoader,\n  List,\n  WindowScroller,\n} from 'react-virtualized';\nimport createPage from '../../utils/createPage';\nimport TopicFeeds from '../../models/TopicFeeds';\nimport TopicItem from '../../components/TopicItem';\nimport Menu from './Menu';\n\nclass Home extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      mounted: false,\n      sidebarOpen: false,\n      pullHookState: 'initial',\n    };\n    this.page = createRef();\n    this.pageContentEle = null;\n    this.cache = new CellMeasurerCache({\n      fixedWidth: true,\n      fixedHeight: false,\n    });\n  }\n\n  componentDidMount() {\n    const pageEle = findDOMNode(this.page.current);\n    if (pageEle) {\n      const pageContentEle = pageEle.querySelector('.page__content');\n      this.pageContentEle = pageContentEle;\n    }\n    this.setState({ mounted: true });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.refreshing && !this.props.refreshing) {\n      this.setState({ pullHookState: 'initial' });\n      if (this.refreshDone) {\n        this.refreshDone();\n        this.refreshDone = null;\n      }\n    }\n    if (prevProps.moreLoading && !this.props.moreLoading) {\n      if (this.loadMoreDone) {\n        this.loadMoreDone();\n        this.loadMoreDone = null;\n      }\n    }\n  }\n\n  onPullHookChange = ({ state }) => {\n    this.setState({ pullHookState: state });\n  };\n\n  onRefresh = done => {\n    this.refreshDone = done;\n    this.props.onRefresh();\n  };\n\n  onLoadMore = () => {\n    this.props.onLoadMore();\n    return new Promise(resolve => {\n      this.loadMoreDone = resolve;\n    });\n  };\n\n  isRowLoaded = ({ index }) => {\n    const count = this.props.topics ? this.props.topics.length : 0;\n    return index < count;\n  };\n\n  openSidebar = () => this.setState({ sidebarOpen: true });\n\n  closeSidebar = () => this.setState({ sidebarOpen: false });\n\n  renderTopic = ({ key, index, parent, style }) => {\n    const topic = this.props.topics[index];\n    if (!topic) {\n      return index > 0 ? <div key={key}>加载中...</div> : null;\n    }\n    return (\n      <CellMeasurer\n        key={key}\n        cache={this.cache}\n        columnIndex={0}\n        parent={parent}\n        rowIndex={index}\n      >\n        <div style={style}>\n          <TopicItem\n            onClick={() => this.props.navigator.pushPage(`/topic/${topic.id}`)}\n            topic={topic}\n          />\n        </div>\n      </CellMeasurer>\n    );\n  };\n\n  renderSidebar = () => {\n    return (\n      <Page>\n        <Menu\n          onClick={tab => {\n            this.props.navigator.resetPage(`/?tab=${tab}`);\n          }}\n        />\n      </Page>\n    );\n  };\n\n  renderMain = () => {\n    const { topics } = this.props;\n    const { mounted, pullHookState } = this.state;\n    return (\n      <Page\n        ref={this.page}\n        renderToolbar={() => (\n          <Toolbar>\n            <div className=\"left\">\n              <ToolbarButton onClick={this.openSidebar}>\n                <Icon icon=\"md-menu\" />\n              </ToolbarButton>\n            </div>\n            <div className=\"center\">CNode 社区</div>\n          </Toolbar>\n        )}\n      >\n        <PullHook onChange={this.onPullHookChange} onLoad={this.onRefresh}>\n          {pullHookState === 'initial' ? (\n            <span>\n              <Icon size={35} spin={false} icon=\"ion-arrow-down-a\" />\n              <span>下拉刷新</span>\n            </span>\n          ) : pullHookState === 'preaction' ? (\n            <span>\n              <Icon size={35} spin={false} icon=\"ion-arrow-up-a\" />\n              <span>松开刷新</span>\n            </span>\n          ) : (\n            <span>\n              <Icon size={35} spin icon=\"ion-load-d\" />\n              <span>加载中...</span>\n            </span>\n          )}\n        </PullHook>\n        {mounted ? (\n          <WindowScroller scrollElement={this.pageContentEle}>\n            {({ height, width, isScrolling, registerChild, scrollTop }) => {\n              if (!height || !width) {\n                return null;\n              }\n              const rowCount =\n                topics && topics.length > 0 ? topics.length + 1 : 0;\n              return (\n                <div ref={registerChild}>\n                  <InfiniteLoader\n                    isRowLoaded={this.isRowLoaded}\n                    loadMoreRows={this.onLoadMore}\n                    rowCount={rowCount}\n                    threshold={3}\n                  >\n                    {props => (\n                      <List\n                        ref={props.registerChild}\n                        autoHeight\n                        deferredMeasurementCache={this.cache}\n                        height={height}\n                        width={width}\n                        isScrolling={isScrolling}\n                        onRowsRendered={({ startIndex, stopIndex }) => {\n                          // List 第一次会渲染所有数据, 导致每次都会自动加载第二页数据\n                          if (\n                            stopIndex === 0 ||\n                            stopIndex - startIndex === rowCount - 1\n                          ) {\n                            return;\n                          }\n                          props.onRowsRendered({ startIndex, stopIndex });\n                        }}\n                        overscanRowCount={6}\n                        rowCount={rowCount}\n                        rowHeight={this.cache.rowHeight}\n                        rowRenderer={this.renderTopic}\n                        scrollTop={scrollTop}\n                      />\n                    )}\n                  </InfiniteLoader>\n                </div>\n              );\n            }}\n          </WindowScroller>\n        ) : null}\n      </Page>\n    );\n  };\n\n  render() {\n    return (\n      <Page>\n        <Splitter>\n          <SplitterSide\n            collapse\n            isOpen={this.state.sidebarOpen}\n            side=\"left\"\n            swipeable\n            width={300}\n            onClose={this.closeSidebar}\n          >\n            {this.renderSidebar()}\n          </SplitterSide>\n          <SplitterContent>{this.renderMain()}</SplitterContent>\n        </Splitter>\n      </Page>\n    );\n  }\n}\n\nexport default createPage({\n  models: {\n    topicFeeds: TopicFeeds,\n  },\n  getInitialProps: ({ props, store, models: { topicFeeds } }) => {\n    const { match } = props;\n    const tab = match && match.query && match.query.tab ? match.query.tab : '';\n    store.dispatch(topicFeeds.actions.initiateIfNeed(tab));\n  },\n  mapStateToProps: (state, { models: { topicFeeds } }) => {\n    const initiate = topicFeeds.getInitiate(state);\n    const loadMore = topicFeeds.getLoadMore(state);\n    return {\n      topics: topicFeeds.getTopics(state),\n      hasMore: topicFeeds.hasMore(state),\n      moreLoadError: loadMore.error,\n      moreLoading: loadMore.loading,\n      refreshError: initiate.error,\n      refreshing: initiate.loading,\n    };\n  },\n  mapDispatchToProps: (dispatch, { models: { topicFeeds } }) => ({\n    onRefresh: () => dispatch(topicFeeds.actions.initiate()),\n    onLoadMore: () => dispatch(topicFeeds.actions.loadMore()),\n  }),\n})(Home);\n","import Home from './Home';\n\nexport default Home;\n","import timeago from 'timeago.js';\n\nexport default date => {\n  const timeagoInstance = timeago(Date.now());\n  return timeagoInstance.format(date, 'zh_CN');\n};\n","import { entities, DetailPage } from 'redumd';\nimport * as api from 'cnodejs.api';\nimport * as schemas from '../schemas';\n\nclass TopicDetail extends DetailPage {\n  constructor(namespace = '') {\n    super(`TopicDetail/${namespace}`, {\n      api: id =>\n        api.loadTopicDetail(id).then(({ author, author_id, ...data }) => ({\n          data: {\n            ...data,\n            author: {\n              ...author,\n              id: author_id,\n            },\n          },\n        })),\n      entities,\n      schema: schemas.topic,\n    });\n\n    this.getTopic = state => {\n      const entitiesState = entities.getState(state);\n      const articleEntity = this.getDetail(state);\n      return {\n        ...articleEntity,\n        author: articleEntity\n          ? schemas.author.getEntity(entitiesState, articleEntity.author)\n          : null,\n        replies: ((articleEntity && articleEntity.replies) || []).map(replyId =>\n          schemas.reply.getEntity(entitiesState, replyId)\n        ),\n      };\n    };\n  }\n}\n\nexport default TopicDetail;\n","import React, { PureComponent } from 'react';\nimport {\n  BackButton,\n  Card,\n  List,\n  ListItem,\n  ListTitle,\n  Page,\n  Toolbar,\n} from 'react-onsenui';\nimport createPage from '../../utils/createPage';\nimport timeago from '../../utils/timeago';\nimport * as models from '../../models';\nimport Avatar from '../../common/Avatar';\nimport classes from './Topic.module.scss';\n\nclass Topic extends PureComponent {\n  renderTopic(topic) {\n    if (!topic || !topic.author) {\n      return null;\n    }\n    const { author } = topic;\n    return (\n      <Card className={classes.topic}>\n        <div className=\"title\">{topic.title}</div>\n        <div className={classes.author}>\n          <Avatar\n            className={classes.avatar}\n            source={author ? author.avatar_url : ''}\n          />\n          <div className={classes.anthorContent}>\n            <div className={classes.authorName}>\n              {author ? author.loginname : ''}\n            </div>\n            <div className={classes.publish}>\n              <span>{timeago(topic.create_at)}</span>\n              <span> • </span>\n              <span>{`${topic.visit_count}次浏览`}</span>\n            </div>\n          </div>\n        </div>\n        <div\n          className=\"content\"\n          dangerouslySetInnerHTML={{ __html: topic.content }}\n        />\n      </Card>\n    );\n  }\n\n  renderReplies(replies = []) {\n    return (\n      <div>\n        <ListTitle>{`${replies.length}条回复`}</ListTitle>\n        <List\n          dataSource={replies}\n          renderRow={(reply, index) => {\n            return (\n              <ListItem key={reply.id}>\n                <div className={classes.replyAuthor}>\n                  <Avatar\n                    className={classes.replyAvatar}\n                    source={reply.author ? reply.author.avatar_url : ''}\n                  />\n                  <div className={classes.replyAuthorContent}>\n                    <div className={classes.replyAuthorName}>\n                      {reply.author ? reply.author.loginname : ''}\n                    </div>\n                    <div className={classes.replyTime}>\n                      <span>{timeago(reply.create_at)}</span>\n                    </div>\n                  </div>\n                </div>\n                <div dangerouslySetInnerHTML={{ __html: reply.content }} />\n              </ListItem>\n            );\n          }}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    const { topic, navigator } = this.props;\n    return (\n      <Page\n        renderToolbar={() => (\n          <Toolbar>\n            <div className=\"left\">\n              <BackButton onClick={() => navigator.popPage()}>返回</BackButton>\n            </div>\n            <div className=\"center\">话题</div>\n          </Toolbar>\n        )}\n      >\n        {topic && topic.id ? this.renderTopic(topic) : null}\n        {topic && topic.replies && topic.replies.length > 0\n          ? this.renderReplies(topic.replies)\n          : null}\n      </Page>\n    );\n  }\n}\n\nexport default createPage({\n  models: {\n    topicDetail: models.TopicDetail,\n  },\n  getInitialProps: ({ props: { match }, store, models: { topicDetail } }) => {\n    store.dispatch(topicDetail.actions.initiateIfNeed(match.params.id));\n  },\n  mapStateToProps: (state, { models: { topicDetail } }) => {\n    const initiate = topicDetail.getInitiate(state);\n    return {\n      topic: topicDetail.getTopic(state),\n      refreshError: initiate.error,\n      refreshing: initiate.loading,\n    };\n  },\n  mapDispatchToProps: (dispatch, { models: { topicDetail } }) => ({\n    onRefresh: () => dispatch(topicDetail.actions.initiate()),\n  }),\n})(Topic);\n","import React, { PureComponent } from 'react';\nimport 'onsenui/css/onsenui.css';\nimport 'onsenui/css/onsen-css-components.css';\nimport RouterNavigator from './components/RouterNavigator';\nimport Home from './pages/Home';\nimport Topic from './pages/Topic';\n\nconst ROUTES = [\n  {\n    path: '/',\n    component: Home,\n  },\n  {\n    path: '/topic/:id',\n    component: Topic,\n  },\n];\n\nclass App extends PureComponent {\n  render() {\n    return <RouterNavigator routes={ROUTES} />;\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { init } from 'redumd';\nimport { Provider } from 'react-redux';\nimport 'react-virtualized/styles.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst store = init({});\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\nif (process.env.NODE_ENV === 'production') {\n  // If you want your app to work offline and load faster, you can change\n  // unregister() to register() below. Note this comes with some pitfalls.\n  // Learn more about service workers: http://bit.ly/CRA-PWA\n  // serviceWorker.unregister();\n  serviceWorker.register();\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"TopicItem_header__3jijb\",\"avatar\":\"TopicItem_avatar__s3LYu\",\"headerContent\":\"TopicItem_headerContent__3yAR9\",\"publish\":\"TopicItem_publish__2YIKz\",\"title\":\"TopicItem_title__3ZioO\",\"content\":\"TopicItem_content__1paU7\",\"footer\":\"TopicItem_footer__1HcTq\"};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nvar PREFIX = 'cnodejs.practice.com';\nvar ACCESS_TOKEN = PREFIX + '.ACCESS_TOKEN';\nvar BASE_URL = 'https://cnodejs.org/api/v1';\n\nvar setAccessToken = function setAccessToken(accessToken) {\n  return localStorage.setItem(ACCESS_TOKEN, accessToken);\n};\n\nvar getAccessToken = exports.getAccessToken = function getAccessToken() {\n  return localStorage.getItem(ACCESS_TOKEN);\n};\n\nvar request = exports.request = function request(path) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    method: 'GET'\n  };\n  var originalReturn = arguments[2];\n  var url = '' + BASE_URL + path;\n  var accesstoken = getAccessToken();\n\n  if (options.method === 'GET' && accesstoken) {\n    url += (url.indexOf('?') >= 0 ? '&' : '?') + 'accesstoken=' + accesstoken;\n  }\n\n  return fetch(url, options).then(function (response) {\n    if (!/application\\/json/.test(response.headers.get('Content-Type'))) {\n      throw new Error('系统错误');\n    }\n\n    return response.json();\n  }).then(function (response) {\n    if (originalReturn) {\n      return response;\n    }\n\n    var success = response.success,\n        error_msg = response.error_msg,\n        data = response.data;\n\n    if (!success) {\n      throw new Error(error_msg);\n    }\n\n    return data;\n  });\n};\n\nvar loadTopicList = exports.loadTopicList = function loadTopicList(tab, page, size) {\n  return request('/topics?page=' + page + '&limit=' + size + (tab ? '&tab=' + tab : ''));\n};\n\nvar loadTopicDetail = exports.loadTopicDetail = function loadTopicDetail(id) {\n  return request('/topic/' + id);\n};\n\nvar collectTopic = exports.collectTopic = function collectTopic(id, isCollect) {\n  return request('/topic_collect/' + (isCollect ? 'collect' : 'de_collect'), {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    },\n    body: 'accesstoken=' + getAccessToken() + '&topic_id=' + id\n  }, true).then(function (response) {\n    var success = response.success,\n        error_msg = response.error_msg;\n\n    if (!success && error_msg) {\n      throw new Error(error_msg);\n    }\n\n    return response;\n  });\n};\n\nvar likeReply = exports.likeReply = function likeReply(id) {\n  return request('/reply/' + id + '/ups', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    },\n    body: 'accesstoken=' + getAccessToken()\n  }, true).then(function (response) {\n    var success = response.success,\n        error_msg = response.error_msg,\n        action = response.action;\n\n    if (!success && error_msg) {\n      throw new Error(error_msg);\n    }\n\n    return action;\n  });\n};\n\nvar loadUserDetail = exports.loadUserDetail = function loadUserDetail(id) {\n  return request('/user/' + id);\n};\n\nvar loadUserCollections = exports.loadUserCollections = function loadUserCollections(id) {\n  return request('/topic_collect/' + id);\n};\n\nvar loadMessages = exports.loadMessages = function loadMessages() {\n  return request('/messages');\n};\n\nvar markMessage = exports.markMessage = function markMessage(id) {\n  return request('/message/mark_one/' + id, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    },\n    body: 'accesstoken=' + getAccessToken()\n  });\n};\n\nvar markAllMessage = exports.markAllMessage = function markAllMessage(id) {\n  return request('message/mark_all', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    },\n    body: 'accesstoken=' + getAccessToken()\n  });\n};\n\nvar login = function login(accesstoken) {\n  return request('/accesstoken', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    },\n    body: 'accesstoken=' + accesstoken\n  }, true).then(function (_ref) {\n    var success = _ref.success,\n        error_msg = _ref.error_msg,\n        data = _objectWithoutProperties(_ref, ['success', 'error_msg']);\n\n    if (!success) {\n      throw new Error(error_msg);\n    }\n\n    setAccessToken(accesstoken);\n    return data;\n  });\n};\n\nexports.login = login;\n\nvar logout = exports.logout = function logout() {\n  return setAccessToken('');\n};"],"sourceRoot":""}